<div class="container my-5">
  <div class="container my-5">

  <!-- Back to Dashboard Button -->
  <div class="mb-4">
    <button class="btn btn-outline-primary" routerLink="/labdashboard">
  &larr; Back to Dashboard
</button>

  </div>
  <h1 class="text-center mb-4" style="font-weight: 700; color: #d6336c; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
    MediCare+
  </h1>

  <h2 class="mb-4 text-center" style="color: #6c757d;">All Tested Lab Results</h2>

  <!-- Search Bar -->
  <div class="mb-3 d-flex justify-content-center">
    <input
      type="text"
      class="form-control w-50"
      placeholder="Search by Patient Name"
      [(ngModel)]="searchPatientName"
      (ngModelChange)="filterResults()"
    />
  </div>

  <div class="table-responsive shadow-sm rounded border border-secondary">
    <table class="table table-striped table-hover mb-0">
      <thead class="table-dark">
        <tr>
          <th>Register Number</th>
          <th>Patient Name</th>
          <th>Lab Name</th>
          <th>Result</th>
          <th>Status</th>
          <th>Remarks</th>
          <th>Recorded On</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let result of filteredResults">
          <td>{{ result.registerNumber }}</td>
          <td>{{ result.patientName }}</td>
          <td>{{ result.labName }}</td>
          <td>{{ result.resultValue || 'N/A' }}</td>
          <td>
            <span [ngClass]="{'text-success': !result.resultStatus, 'text-danger': result.resultStatus}">
              {{ result.resultStatus ? 'Positive' : 'Negative' }}
            </span>
          </td>
          <td>{{ result.remarks || '-' }}</td>
          <td>{{ result.date | date: 'short' }}</td>
         
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Update Form -->
  <div *ngIf="showUpdateForm" class="mt-4">
    <h4>Update Test Result</h4>
    <form [formGroup]="updateForm" (ngSubmit)="submitUpdate()">
      <div class="mb-3">
        <label>Result Value</label>
        <input type="text" class="form-control" formControlName="resultValue" />
      </div>
      <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" formControlName="resultStatus" id="resultStatus" />
        <label class="form-check-label" for="resultStatus">Positive Result</label>
      </div>
      <div class="mb-3">
        <label>Remarks</label>
        <textarea class="form-control" formControlName="remarks"></textarea>
      </div>
      <button type="submit" class="btn btn-success">Submit</button>
      <button type="button" class="btn btn-secondary ms-2" (click)="showUpdateForm = false">Cancel</button>
    </form>
  </div>
</div>
