<app-navigation-bar></app-navigation-bar>

<div class="page-content medicare-labtests container-fluid py-4">

  <!-- Back Button -->
  <div class="mb-3">
    <button class="btn shadow-sm text-white btn-back" routerLink="/labdashboard">
      &larr; Back to Dashboard
    </button>
  </div>

  <!-- Page Title -->
  <h4 class="page-title text-center mb-4">
    Prescribed Lab Tests
  </h4>

  <!-- Table Container -->
  <div class="center-container">
    <div class="center-narrow table-responsive">
      <table class="table table-bordered table-hover text-center align-middle shadow-sm">
        <thead>
          <tr>
            <th>Lab Name</th>
            <th>Doctor Name</th>
            <th>Patient Name</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody *ngIf="labTests.length > 0; else noData">
          <tr *ngFor="let test of labTests | paginate: { itemsPerPage: pageSize, currentPage: page }">
            <td class="lab-name">{{ test.labName }}</td>
            <td>{{ test.doctorName }}</td>
            <td>{{ test.patientName }}</td>
            <td>
              <span class="badge px-3 py-2 shadow-sm"
                    [ngClass]="test.isCompleted ? 'bg-success' : 'bg-secondary text-dark'">
                {{ test.isCompleted ? 'Completed' : 'Pending' }}
              </span>
            </td>
            <td>
              <button class="btn btn-sm text-white shadow-sm assign-btn" (click)="assignLabTest(test)">
                Assign
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- No Data State -->
  <ng-template #noData>
    <div class="alert alert-info text-center w-100 shadow-sm no-data">
      No lab tests assigned.
    </div>
  </ng-template>

  <!-- Pagination Footer -->
  <div class="footer-pagination">
    <pagination-controls (pageChange)="page = $event" class="custom-page"></pagination-controls>
  </div>

</div>
